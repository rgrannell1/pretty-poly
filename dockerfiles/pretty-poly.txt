FROM ubuntu
MAINTAINER Ryan Grannell

RUN mkdir /data
VOLUME /data

RUN apt-get update
RUN apt-get install golang-go git --assume-yes
RUN go get golang.org/x/build/version/go1.9beta1
RUN go1.9beta1 download

RUN mkdir /usr/local/app
RUN mkdir /usr/local/app/src

ADD src /usr/local/app/src
ADD Makefile /usr/local/app/Makefile

WORKDIR /usr/local/app

ENV GOPATH /usr/local/app
RUN go1.9beta1 get github.com/gonum/matrix
RUN go1.9beta1 get github.com/gonum/floats
RUN go1.9beta1 get github.com/franela/goblin
RUN go1.9beta1 get github.com/docopt/docopt-go

CMD go1.9beta1 run src/github.com/rgrannell/pretty_poly_cli/main.go solve --path /data/test --extreme 5 --order 5 --precision 10 && go1.9beta1 run src/github.com/rgrannell/pretty_poly_cli/main.go draw  --path /data/test
